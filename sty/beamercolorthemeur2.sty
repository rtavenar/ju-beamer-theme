%%
%% ---------------------------------------------------------------------------
%% Modified 2021 by Marcel Bollmann.
%% ---------------------------------------------------------------------------
%% Copyright 2015 Matthias Vogelgesang and the LaTeX community. A full list of
%% contributors can be found at
%% 
%%     https://github.com/matze/mtheme/graphs/contributors
%% 
%% and the original template was based on the HSRM theme by Benjamin Weiss.
%% 
%% ---------------------------------------------------------------------------
%% This work is licensed under a Creative Commons Attribution-ShareAlike 4.0
%% International License (https://creativecommons.org/licenses/by-sa/4.0/).
%% ---------------------------------------------------------------------------

\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{beamercolorthemeur2}[2022 UR2 Color Theme]
\RequirePackage{pgfopts}
\RequirePackage{tikz}
\usetikzlibrary{positioning,calc}
\pgfkeys{
  /metropolis/color/block/.cd,
    .is choice,
    transparent/.code=\metropolis@block@transparent,
    fill/.code=\metropolis@block@fill,
}
\pgfkeys{
  /metropolis/color/itemize/.cd,
    .is choice,
    colored/.code=\metropolis@itemize@colored,
    mono/.code=\metropolis@itemize@mono,
}
\pgfkeys{
  /metropolis/color/maincolor/.cd,
    .is choice,
    red/.code=\metropolis@colors@red,
    grey/.code=\metropolis@colors@grey,
    white/.code=\metropolis@colors@white,
}
\newcommand{\metropolis@color@setdefaults}{
  \pgfkeys{/metropolis/color/.cd,
    maincolor=red,
    block=transparent,
    itemize=mono,
  }
}






% main colors
\definecolor{ur2Rouge}{RGB}{203,0,25}
\definecolor{ur2Gris}{RGB}{116,112,111}

% complementary colors
\definecolor{ur2Jaune}{RGB}{252,243,10}
\definecolor{ur2Turquoise}{RGB}{40,162,194}
\definecolor{ur2Bleu}{RGB}{21,70,153}
\definecolor{ur2GrisClair}{RGB}{144,144,147}

\setbeamercolor{normal text}{%
  fg=black!94,
  bg=white
}
\usebeamercolor[fg]{normal text}
\setbeamercolor{alerted text}{%
  fg=ur2Rouge
}
\setbeamercolor{example text}{%
  fg=ur2Turquoise
}
\setbeamercolor{warning text}{%
  fg=ur2Jaune
}
\setbeamercolor{quotation mark}{%
  fg=ur2GrisClair
}

\newcommand{\metropolis@colors@grey}{
  \setbeamercolor{palette primary}{%
    use=normal text,
    fg=black!2,
    bg=ur2Gris
  }
  \setbeamercolor{palette variant faded1}{%
    use=normal text,
    fg=black!2,
    bg=ur2GrisClair
  }
  \setbeamercolor{palette variant faded2}{%
    use=normal text,
    fg=black!2,
    bg=ur2GrisClair
  }
  \setbeamercolor{progress bar}{%
    use=alerted text,
    fg=ur2Rouge,
    bg=ur2GrisClair
  }
  \setbeamercolor{footline standout}{
    fg=ur2GrisClair,
    bg=
  }
}
\newcommand{\metropolis@colors@white}{  % TODO: would require to have black logo here
  \setbeamercolor{palette primary}{%
    use=normal text,
    fg=black,
    bg=white
  }
  \setbeamercolor{palette variant faded1}{%
    use=normal text,
    fg=black!2,
    bg=ur2GrisClair
  }
  \setbeamercolor{palette variant faded2}{%
    use=normal text,
    fg=black!2,
    bg=ur2GrisClair
  }
  \setbeamercolor{progress bar}{%
    use=alerted text,
    fg=ur2Gris,
    bg=ur2GrisClair
  }
  \setbeamercolor{footline standout}{
    fg=ur2GrisClair,
    bg=
  }
}
\newcommand{\metropolis@colors@red}{
  \setbeamercolor{palette primary}{%
    use=normal text,
    fg=white!2,
    bg=ur2Rouge
  }
  \setbeamercolor{palette variant faded1}{%
    use=normal text,
    fg=white!2,
    bg=ur2Rouge!50
  }
  \setbeamercolor{palette variant faded2}{%
    use=normal text,
    fg=white!2,
    bg=ur2Rouge!20
  }
  \setbeamercolor{progress bar}{%
    use=alerted text,
    fg=ur2Rouge,
    bg=ur2GrisClair
  }
  \setbeamercolor{footline standout}{
    fg=ur2GrisClair,
    bg=
  }
}
\setbeamercolor{background on title/section}{%
  use=palette primary,
  bg=palette primary.bg
}
\setbeamercolor{titlelike}{use=palette primary, parent=palette primary}
\setbeamercolor{author}{use=palette primary, parent=palette primary}
\setbeamercolor{date}{use=palette primary, parent=palette primary}
\setbeamercolor{institute}{use=palette primary, parent=palette primary}
\setbeamercolor{structure}{use=normal text, fg=normal text.fg}  % TODO ?
\setbeamercolor{frametitle}{%
  use=palette primary,
  parent=palette primary
}
\setbeamercolor{title separator}{
  use=progress bar,
  parent=progress bar
}
\setbeamercolor{progress bar in head/foot}{%
  use=progress bar,
  parent=progress bar
}
\setbeamercolor{progress bar in section page}{
  use=progress bar,
  parent=progress bar
}
\newcommand{\metropolis@block@transparent}{
  \setbeamercolor{block title}{%
    use=normal text,
    fg=normal text.fg,
    bg=
  }
  \setbeamercolor{block body}{
    bg=
  }
  \setbeamercolor{block title alerted}{%
    use={block title, alerted text},
    bg=block title.bg,
    fg=alerted text.fg
  }
  \setbeamercolor{block title example}{%
    use={block title, example text},
    bg=block title.bg,
    fg=example text.fg
  }
  \setbeamercolor{block title warning}{%
    use={block title},
    bg=block title.bg,
    fg=ur2Jaune
  }
  \setbeamercolor{block body alerted}{use=block body, parent=block body, bg=block body.bg}
  \setbeamercolor{block body example}{use=block body, parent=block body, bg=block body.bg}
  \setbeamercolor{block body warning}{use=block body, parent=block body, bg=block body.bg}
  \setbeamertemplate{blocks}[rounded]
  \setbeamertemplate{block warning begin}[rounded]
  \setbeamertemplate{block warning end}[rounded]
}
\newcommand{\metropolis@block@fill}{
  \setbeamercolor{block title}{%
    use=normal text,
    fg=normal text.bg,
    bg=ur2Gris
  }
  \setbeamercolor{block body}{
    use={block title, normal text},
    bg=ur2GrisClair
  }
  \setbeamercolor{block title alerted}{%
    use=normal text,
    bg=ur2Rouge,
    fg=normal text.bg
  }
  \setbeamercolor{block body alerted}{
    use=normal text,
    bg=ur2Rouge!50,
    fg=normal text.fg
  }
  \setbeamercolor{block title example}{%
    use=normal text,
    bg=ur2Turquoise,
    fg=normal text.bg
  }
  \setbeamercolor{block body example}{
    use=normal text,
    bg=ur2Turquoise!50,
    fg=normal text.fg
  }
  \setbeamercolor{block title warning}{%
    use=normal text,
    bg=ur2Jaune,
    fg=normal text.bg
  }
  \setbeamercolor{block body warning}{
    use=normal text,
    bg=ur2Jaune!50,
    fg=normal text.fg
  }
  \setbeamertemplate{blocks}[default]
  \setbeamertemplate{block warning begin}[default]
  \setbeamertemplate{block warning end}[default]
}
\setbeamercolor{footnote}{fg=ur2Gris}
\setbeamercolor{footnote mark}{fg=.}
\setbeamercolor{footline}{
    fg=ur2Gris,
    bg=
}
\setbeamercolor{headlogo line white}{
    fg=white,
}
\setbeamercolor{headlogo line black}{
    fg=black,
}

%% MB: Very basic support for TOC
\setbeamerfont{section in toc}{size=\normalsize}
\setbeamerfont{subsection in toc}{size=\small}
\setbeamertemplate{section in toc}{\bigskip\null\inserttocsectionnumber.\space\inserttocsection\smallskip\par}
\setbeamertemplate{subsection in toc}{\qquad{\scalebox{.65}{\raisebox{1.25\p@}{$\blacksquare$}}}\hspace{1em}\inserttocsubsection\par}
%\setbeamercolor{section in toc}{use=palette primary, parent=palette primary}
%\setbeamercolor{subsection in toc}{use=palette primary, parent=palette primary}
\setbeamercolor{section in toc}{use=normal text, parent=normal text}
\setbeamercolor{subsection in toc}{use=normal text, parent=normal text}
%%%%%%%%%%%

\setbeamercolor{bibliography entry author}{use=normal text, fg=normal text.fg}
\setbeamercolor{bibliography entry title}{fg=ur2Turquoise}
\setbeamercolor{bibliography entry location}{fg=ur2Gris}

%% MB: nicer enumerate environments
\setbeamercolor{item}{use=normal text, parent=normal text, fg=normal text.fg}
\newcommand{\metropolis@itemize@colored}{
    \setbeamercolor{itemize item}{use=palette primary, parent=palette primary, fg=palette primary.bg}
    \setbeamercolor{itemize subitem}{use=palette primary, parent=palette primary, fg=ur2Turquoise}
    \setbeamercolor{itemize subsubitem}{use=palette primary, parent=palette primary, fg=ur2Gris}
    \setbeamercolor{item projected}{use=palette primary, parent=palette primary, fg=palette primary.fg, bg=palette primary.bg}
    \setbeamercolor{subitem projected}{fg=black!2, bg=ur2Turquoise}
    \setbeamercolor{subsubitem projected}{fg=black!2, bg=ur2Gris}
}
\newcommand{\metropolis@itemize@mono}{
    \setbeamercolor{itemize item}{use=normal text, parent=normal text, fg=normal text.fg}
    \setbeamercolor{itemize subitem}{use=normal text, parent=normal text, fg=normal text.fg}
    \setbeamercolor{itemize subsubitem}{use=normal text, parent=normal text, fg=normal text.fg}
    \setbeamercolor{item projected}{use=normal text, parent=normal text, fg=normal text.bg, bg=ur2Gris}
    \setbeamercolor{subitem projected}{use=normal text, parent=normal text, fg=normal text.bg, bg=ur2Gris}
    \setbeamercolor{subsubitem projected}{use=normal text, parent=normal text, fg=normal text.bg, bg=ur2Gris}
}

\newcommand{\highlight}[1]{\textcolor{ur2Turquoise}{\usebeamerfont{alerted text}#1}}
\newcommand{\alertExample}[1]{\textcolor{ur2Bleu}{\usebeamerfont{alerted text}#1}}

\metropolis@color@setdefaults
\ProcessPgfPackageOptions{/metropolis/color}

\mode<all>
\endinput
%%
%% End of file `beamercolorthemeur2.sty'.
